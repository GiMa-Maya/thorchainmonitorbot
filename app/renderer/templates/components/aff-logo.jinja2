<style>
    .affiliate-logo {
        width: 120px;
        height: 120px;
        border-radius: 50%;
        box-shadow: 0 0 4px rgba(255, 255, 255, 0.3);
        /* gradient */
        background: linear-gradient(90deg, #eae5e5, #b8b8b8);
    }

    .affiliate-name {
        font-weight: bolder;
        margin-top: 10px;
        font-size: 32px;
        width: 100%;
        text-align: center;
        text-shadow: 0 0 10px rgba(255, 255, 255, 0.3);
    }

    .affiliate-name-no {
        text-shadow: none;
        color: #c5c5c5;
    }

    .aff-fee {
        display: inline;
        font-size: 34px;
        width: 220px;
        text-align: left;
        color: #51efe2;
    }

    .no-aff {
        opacity: 0.5;
        letter-spacing: 1px;
        text-align: center;
    }

    .affiliate-part {
        width: 300px;
    }

</style>

<div class="affiliate-part">
    {% if affiliate_name %}
        <img src="renderer/logo/unknown.png?rv=1" alt="{{ affiliate_name }} logo" class="affiliate-logo">
        <div class="affiliate-name">
            {{ affiliate_name }}
            <div class="aff-fee">{{ "%.1f"|format(affiliate_fee) }}%</div>
        </div>

    {% else %}
        {% include "components/no-aff-logo.jinja2" %}
        <div class="affiliate-name no-aff">No affiliate</div>
    {% endif %}
</div>

<script>
    const affiliateName = "{{ affiliate_name }}".toLowerCase();

    const nameToCode = {
        'trust wallet': 'trust',
        'trustwallet': 'trust',
        'trust': '',
        'thorswap': '',
        'asgardex': '',
        'babylonswap': '',
        'bitget': '',
        'cacaoswap': '',
        'cakewallet': '',
        'coinbot': '',
        'ctrl': '',
        'decentralfi': '',
        'edgewallet': '',
        'eldorito': '',
        'ethos': '',
        'gemwallet': '',
        'giddy': '',
        'instaswap': '',

        'ledgerlive': '',
        'ledger': 'ledgerlive',
        'll': 'ledgerlive',
        'lends': '',
        'lifi': '',
        'li.fi': 'lifi',
        'okx': '',
        'onekey': '',
        'rango': '',
        'shapeshift': '',
        'symbiosis': '',
        'thorwallet': '',
        'unizen': '',
        'vultisig': '',
        'zengo': ''
    };
    let code = nameToCode[affiliateName];

    if (code !== undefined) {
        if (code === '') {
            code = affiliateName;
        }
        const basePath = `https://raw.githubusercontent.com/ViewBlock/cryptometa/master/data/thorchain/ecosystem/${code}/logo.svg`
        const affiliateLogo = document.querySelector('.affiliate-logo');

        // on error try the same name with .png extension
        affiliateLogo.onerror = function () {
            affiliateLogo.src = basePath.replace('.svg', '.png');
        }

        affiliateLogo.src = basePath;
        console.log(`Affiliate logo for ${affiliateName} URL is ${basePath}`)
    }

</script>

